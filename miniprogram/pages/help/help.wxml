<view class="page">
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <navigation-bar title="å¸®åŠ©ä¸­å¿ƒ" show-back="{{true}}"></navigation-bar>

  <!-- æœç´¢æ¡† -->
  <view class="search-section">
    <view class="search-box">
      <text class="search-icon">ğŸ”</text>
      <input class="search-input" placeholder="æœç´¢å¸®åŠ©å†…å®¹" value="{{searchKeyword}}" bindinput="onSearchInput" />
      <text class="search-clear" wx:if="{{searchKeyword}}" bindtap="onSearchClear">âœ•</text>
    </view>
  </view>

  <!-- å¿«é€Ÿå…¥å£ -->
  <view class="quick-section" wx:if="{{!searchKeyword}}">
    <view class="section-header">
      <text class="section-title">å¿«é€Ÿå…¥å£</text>
    </view>
    
    <view class="quick-grid">
      <view class="quick-item" bindtap="onQuickAction" data-type="detection">
        <text class="quick-icon">ğŸ“¸</text>
        <text class="quick-text">å¦‚ä½•æ£€æµ‹</text>
      </view>
      
      <view class="quick-item" bindtap="onQuickAction" data-type="result">
        <text class="quick-icon">ğŸ“Š</text>
        <text class="quick-text">ç»“æœè¯´æ˜</text>
      </view>
      
      <view class="quick-item" bindtap="onQuickAction" data-type="safety">
        <text class="quick-icon">ğŸ›¡ï¸</text>
        <text class="quick-text">å®‰å…¨ç­‰çº§</text>
      </view>
      
      <view class="quick-item" bindtap="onQuickAction" data-type="contact">
        <text class="quick-icon">ğŸ“</text>
        <text class="quick-text">è”ç³»å®¢æœ</text>
      </view>
    </view>
  </view>

  <!-- å¸®åŠ©åˆ†ç±» -->
  <view class="category-section" wx:if="{{!searchKeyword}}">
    <view class="section-header">
      <text class="section-title">å¸®åŠ©åˆ†ç±»</text>
    </view>
    
    <view class="category-list">
      <view class="category-item" wx:for="{{categories}}" wx:key="id" bindtap="onCategoryTap" data-category="{{item}}">
        <view class="category-left">
          <text class="category-icon">{{item.icon}}</text>
          <view class="category-info">
            <text class="category-title">{{item.title}}</text>
            <text class="category-desc">{{item.desc}}</text>
          </view>
        </view>
        <view class="category-right">
          <text class="category-count">{{item.count}}ç¯‡</text>
          <text class="category-arrow">></text>
        </view>
      </view>
    </view>
  </view>

  <!-- å¸¸è§é—®é¢˜ -->
  <view class="faq-section" wx:if="{{!searchKeyword}}">
    <view class="section-header">
      <text class="section-title">å¸¸è§é—®é¢˜</text>
      <text class="section-more" bindtap="onViewAllFAQ">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    
    <view class="faq-list">
      <view class="faq-item" wx:for="{{hotFAQs}}" wx:key="id" bindtap="onFAQTap" data-faq="{{item}}">
        <view class="faq-question">
          <text class="faq-icon">â“</text>
          <text class="faq-text">{{item.question}}</text>
        </view>
        <text class="faq-arrow">></text>
      </view>
    </view>
  </view>

  <!-- æœç´¢ç»“æœ -->
  <view class="search-results" wx:if="{{searchKeyword}}">
    <view class="section-header">
      <text class="section-title">æœç´¢ç»“æœ ({{searchResults.length}})</text>
    </view>
    
    <view class="result-list" wx:if="{{searchResults.length > 0}}">
      <view class="result-item" wx:for="{{searchResults}}" wx:key="id" bindtap="onResultTap" data-result="{{item}}">
        <view class="result-title">{{item.title}}</view>
        <view class="result-content">{{item.content}}</view>
        <view class="result-meta">
          <text class="result-category">{{item.category}}</text>
          <text class="result-time">{{item.updateTime}}</text>
        </view>
      </view>
    </view>
    
    <view class="empty-result" wx:else>
      <text class="empty-icon">ğŸ”</text>
      <text class="empty-text">æœªæ‰¾åˆ°ç›¸å…³å†…å®¹</text>
      <text class="empty-tip">è¯•è¯•å…¶ä»–å…³é”®è¯æˆ–æµè§ˆåˆ†ç±»å†…å®¹</text>
    </view>
  </view>

  <!-- è”ç³»å®¢æœ -->
  <view class="contact-section" wx:if="{{!searchKeyword}}">
    <view class="contact-card">
      <view class="contact-header">
        <text class="contact-title">è¿˜æœ‰é—®é¢˜ï¼Ÿ</text>
        <text class="contact-subtitle">è”ç³»æˆ‘ä»¬çš„å®¢æœå›¢é˜Ÿ</text>
      </view>
      
      <view class="contact-actions">
        <button class="contact-btn primary" bindtap="onContactService">
          <text class="btn-icon">ğŸ’¬</text>
          <text class="btn-text">åœ¨çº¿å®¢æœ</text>
        </button>
        
        <button class="contact-btn secondary" bindtap="onContactPhone">
          <text class="btn-icon">ğŸ“</text>
          <text class="btn-text">ç”µè¯å’¨è¯¢</text>
        </button>
      </view>
      
      <view class="contact-info">
        <text class="contact-time">æœåŠ¡æ—¶é—´ï¼šå‘¨ä¸€è‡³å‘¨æ—¥ 9:00-21:00</text>
      </view>
    </view>
  </view>

  <!-- åé¦ˆå»ºè®® -->
  <view class="feedback-section" wx:if="{{!searchKeyword}}">
    <view class="feedback-card" bindtap="onFeedback">
      <view class="feedback-left">
        <text class="feedback-icon">ğŸ’¡</text>
        <view class="feedback-info">
          <text class="feedback-title">æ„è§åé¦ˆ</text>
          <text class="feedback-desc">å¸®åŠ©æˆ‘ä»¬æ”¹è¿›äº§å“</text>
        </view>
      </view>
      <text class="feedback-arrow">></text>
    </view>
  </view>
</view>

<!-- æ–‡ç« è¯¦æƒ…å¼¹çª— -->
<view class="article-modal" wx:if="{{showArticle}}" bindtap="onCloseArticle">
  <view class="article-content" catchtap="stopPropagation">
    <view class="article-header">
      <text class="article-title">{{currentArticle.title}}</text>
      <text class="article-close" bindtap="onCloseArticle">âœ•</text>
    </view>
    
    <scroll-view class="article-body" scroll-y>
      <rich-text nodes="{{currentArticle.content}}"></rich-text>
    </scroll-view>
    
    <view class="article-footer">
      <view class="article-actions">
        <button class="action-btn" bindtap="onLikeArticle" data-liked="{{currentArticle.liked}}">
          <text class="action-icon">{{currentArticle.liked ? 'ğŸ‘' : 'ğŸ‘ğŸ»'}}</text>
          <text class="action-text">{{currentArticle.liked ? 'å·²èµ' : 'ç‚¹èµ'}}</text>
        </button>
        
        <button class="action-btn" bindtap="onShareArticle">
          <text class="action-icon">ğŸ“¤</text>
          <text class="action-text">åˆ†äº«</text>
        </button>
      </view>
    </view>
  </view>
</view>